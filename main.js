(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var a=e.g.document;if(!t&&a&&(a.currentScript&&(t=a.currentScript.src),!t)){var r=a.getElementsByTagName("script");r.length&&(t=r[r.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();const t=e.p+"img/products/xiaomiRedmi.jpg",a=e.p+"img/products/xiaomiPoco.jpg",r=e.p+"img/products/vivo.jpg",n=e.p+"img/products/samsungS21.jpg",i=e.p+"img/products/samsungS22.jpg",o=e.p+"img/products/samsungA12.jpg",c=e.p+"img/products/samsungFold.jpg",l=e.p+"img/products/iphone11.jpg",s=e.p+"img/products/iphone11Red.jpg",m=e.p+"img/products/iphoneX.jpg",u=e.p+"img/products/iphoneXs.jpg",p=e.p+"img/products/iphoneXsMax.jpg",d=e.p+"img/products/iphone13Pro.jpg",g=e.p+"img/products/iphone13ProMax.jpg",h=e.p+"img/products/iphone11ProMax.jpg",f=e.p+"img/products/iphone8.jpg",y=e.p+"img/products/galaxyM31.jpg",v=e.p+"img/products/xiaomiMi4.jpg",S=e.p+"img/products/xiaomi11T.jpg",k=e.p+"img/products/xiaomiMi11i.jpg",L=e.p+"img/products/iPhoneSE.jpg",P=e.p+"img/products/iPhoneSeRed.jpg",b=e.p+"img/products/galaxyS21Ultra.jpg";var x={mark:[],amountOfCamera:[],color:[],isPopular:!1,amount:["1","40"],year:["2010","2022"],name:"",sorting:"textUp"},O=[{id:"pr01",name:"Iphone 11",src:l,alt:"Iphone 11",amount:23,year:2020,price:800,mark:"Apple",color:"white",amountOfCamera:2,isPopular:!0},{id:"pr02",name:"Samsung Z Fold",src:c,alt:"Samsung Z Fold",amount:11,year:2022,price:1800,mark:"Samsung",color:"black",amountOfCamera:3,isPopular:!0},{id:"pr03",name:"Iphone 11",src:s,alt:"Iphone 11",amount:23,year:2020,price:800,mark:"Apple",color:"red",amountOfCamera:2,isPopular:!1},{id:"pr04",name:"Samsung A 12",src:o,alt:"Samsung A 12",amount:30,year:2021,price:600,mark:"Samsung",color:"white",amountOfCamera:4,isPopular:!0},{id:"pr05",name:"Iphone 8 Plus",src:f,alt:"Iphone 8 Plus",amount:2,year:2018,price:700,mark:"Apple",color:"white",amountOfCamera:2,isPopular:!0},{id:"pr06",name:"Xiaomi Redmi 10",src:t,alt:"Xiaomi Redmi 10",amount:25,year:2021,price:700,mark:"Xiaomi",color:"black",amountOfCamera:4,isPopular:!1},{id:"pr07",name:"Samsung Galaxy S21",src:n,alt:"Samsung Galaxy S21",amount:30,year:2021,price:900,mark:"Samsung",color:"white",amountOfCamera:3,isPopular:!0},{id:"pr08",name:"Iphone 11 Pro Max",src:h,alt:"Iphone 11Pro Max",amount:23,year:2020,price:950,mark:"Apple",color:"green",amountOfCamera:3,isPopular:!0},{id:"pr09",name:"Iphone X",src:m,alt:"Iphone X",amount:12,year:2018,price:600,mark:"Apple",color:"white",amountOfCamera:2,isPopular:!0},{id:"pr10",name:"Xiaomi Poco F3",src:a,alt:"Xiaomi Poco F3",amount:25,year:2021,price:500,mark:"Xiaomi",color:"white",amountOfCamera:3,isPopular:!1},{id:"pr11",name:"Iphone Xs",src:u,alt:"Iphone Xs",amount:12,year:2019,price:650,mark:"Apple",color:"black",amountOfCamera:2,isPopular:!1},{id:"pr12",name:"Samsung Galaxy S22 Ultra",src:i,alt:"Samsung Galaxy S22 Ultra",amount:30,year:2022,price:1100,mark:"Samsung",color:"white",amountOfCamera:4,isPopular:!1},{id:"pr13",name:"Iphone Xs Max",src:p,alt:"Iphone Xs Max",amount:15,year:2019,price:750,mark:"Apple",color:"white",amountOfCamera:2,isPopular:!0},{id:"pr14",name:"Iphone 13 Pro Max",src:g,alt:"Iphone 13Pro Max",amount:25,year:2022,price:1150,mark:"Apple",color:"white",amountOfCamera:3,isPopular:!1},{id:"pr15",name:"Vivo Y20",src:r,alt:"Vivo Y20",amount:9,year:2021,price:450,mark:"Vivo",color:"blue",amountOfCamera:3,isPopular:!0},{id:"pr16",name:"Iphone 13 Pro",src:d,alt:"Iphone 13Pro",amount:20,year:2022,price:1050,mark:"Apple",color:"blue",amountOfCamera:3,isPopular:!0},{id:"pr17",name:"Samsung Galaxy M31",src:y,alt:"Samsung Galaxy M31",amount:17,year:2020,price:300,mark:"Samsung",color:"blue",amountOfCamera:4,isPopular:!1},{id:"pr18",name:"Xiaomi Mi4 3",src:v,alt:"Xiaomi Mi4 3",amount:8,year:2014,price:350,mark:"Xiaomi",color:"white",amountOfCamera:2,isPopular:!1},{id:"pr19",name:"Xiaomi 11T",src:S,alt:"Xiaomi 11T",amount:14,year:2021,price:500,mark:"Xiaomi",color:"white",amountOfCamera:3,isPopular:!0},{id:"pr20",name:"Xiaomi Mi 11i",src:k,alt:"Xiaomi Mi 11i",amount:27,year:2021,price:700,mark:"Xiaomi",color:"black",amountOfCamera:3,isPopular:!0},{id:"pr21",name:"Iphone SE",src:L,alt:"iPhone SE",amount:11,year:2016,price:380,mark:"Apple",color:"black",amountOfCamera:1,isPopular:!1},{id:"pr22",name:"Iphone SE",src:P,alt:"iPhone SE",amount:31,year:2016,price:420,mark:"Apple",color:"red",amountOfCamera:1,isPopular:!1},{id:"pr23",name:"Samsung Galaxy S21 Ultra",src:b,alt:"Samsung Galaxy S21 Ultra",amount:23,year:2021,price:860,mark:"Samsung",color:"black",amountOfCamera:4,isPopular:!0}],w=function(){function e(){this.keyName="products"}return e.prototype.getProducts=function(){var e=localStorage.getItem(this.keyName);return null!==e?JSON.parse(e):[]},e.prototype.putProducts=function(e){var t=this.getProducts(),a=t.indexOf(e),r=t.length,n=!1;return-1===a?r<20?(t.push(e),n=!0):(n=!1,alert("Извините, все слоты заполнены :(")):(t.splice(a,1),n=!1),localStorage.setItem(this.keyName,JSON.stringify(t)),{isPushProduct:n,products:t}},e}();const I=w;const C=function(){function e(){this.localStorageUtil=new I,this.cartBtn=document.querySelector(".basket"),this.closeCartBtn=document.querySelector(".modal__close"),this.modalOverlay=document.querySelector(".modal-overlay"),this.modal=document.querySelector(".modal__container")}return e.prototype.view=function(e){var t=document.querySelector(".basket__count");+e>0?(t.innerText=""+e,t.classList.add("basket__count_active")):(t.innerText="",t.classList.remove("basket__count_active"))},e.prototype.showModal=function(e){var t=this,a=document.querySelector(".modal__table"),r=document.querySelector(".modal__content"),n=document.querySelector(".modal__text");if(a.innerHTML="",n.innerHTML="",this.cartBtn.addEventListener("click",(function(){t.modal.classList.add("modal--visible"),t.modalOverlay.classList.add("modal-overlay--visible")})),this.modalOverlay.addEventListener("click",(function(e){e.target==t.modalOverlay&&(t.modalOverlay.classList.remove("modal-overlay--visible"),t.modal.classList.remove("modal--visible"))})),this.closeCartBtn.addEventListener("click",(function(){t.modalOverlay.classList.remove("modal-overlay--visible"),t.modal.classList.remove("modal--visible")})),0===e.length)n.innerHTML="<h2>Корзина пуста</h2>\n      <p>Но это никогда не поздно исправить :)</p>",r.append(n);else{var i=1;O.forEach((function(t){if(e.includes(""+t.id)){var r=document.createElement("tr");r.innerHTML="<td>"+i+++'</td>\n          <td><img class="modal__img" src="'+t.src+'" alt="'+t.alt+'"></td>\n          <td>'+t.name+"</td>\n          <td>"+t.price.toLocaleString()+" USD</td>",null==a||a.append(r)}}))}},e}();var A=function(){function e(){this.localStorageUtil=new I,this.cart=new C,this.itemIsActive="item-active",this.btnIsActive="btn-active",this.addLabel="Добавить в корзину",this.deletionLabel="Удалить из корзины"}return e.prototype.draw=function(e){var t=this,a=document.querySelector(".product-list"),r=this.localStorageUtil.getProducts();this.cart.view(""+r.length),e.forEach((function(e){var n="",i="",o="";-1===r.indexOf(e.id)?o=t.addLabel:(o=t.deletionLabel,n=t.itemIsActive,i=" "+t.btnIsActive);var c=document.createElement("div");""!==n?c.classList.add("product-item",""+n):c.classList.add("product-item"),c.innerHTML='<div class="front">\n        <img src="'+e.src+'" alt="'+e.alt+'">\n        <h3>'+e.name+'</h3>\n      </div>\n      <div class="back">\n        <h2>'+e.name+'</h2>\n        <ul class="list list-reset">\n            <li>Количество: '+e.amount+"</li>\n            <li>Год выхода: "+e.year+"</li>\n            <li>Производитель: "+e.mark+"</li>\n            <li>Цвет: "+e.color+"</li>\n            <li>Количество камер: "+e.amountOfCamera+'</li>\n        </ul>\n        <button class="product-btn btn-reset'+i+"\" data-id='"+e.id+"'>"+o+"</button>\n      </div>",a.append(c)})),this.cart.showModal(r)},e.prototype.setProductStorage=function(){var e=this;document.querySelector(".product-list").addEventListener("click",(function(t){if(t.target.classList.contains("product-btn")){var a=e.localStorageUtil.putProducts(""+t.target.dataset.id),r=a.isPushProduct,n=a.products;r?(t.target.innerText=e.deletionLabel,t.target.classList.add("btn-active"),t.target.closest(".product-item").classList.add("item-active")):(t.target.innerText=e.addLabel,t.target.classList.remove("btn-active"),t.target.closest(".product-item").classList.remove("item-active")),e.cart.view(""+n.length),e.cart.showModal(n)}}))},e}();const E=A;var T=new E,M=document.querySelector(".product-list"),_=function(e){var t=O.filter((function(t){var a,r,n,i,o,c,l,s=e.mark.length,m=e.color.length,u=e.amountOfCamera.length,p=e.name.length,d=function(t){return!!(""+t).toLowerCase().includes(e.name.toLowerCase())};return a=!!(s>0&&e.mark.includes(""+t.mark)||0===s),r=!!(m>0&&e.color.includes(""+t.color)||0===m),n=!!(u>0&&e.amountOfCamera.includes(""+t.amountOfCamera)||0===u),i=!0===e.isPopular&&""+t.isPopular=="true"||!1===e.isPopular,o=+(""+t.amount)>=+e.amount[0]&&+(""+t.amount)<=+e.amount[1],c=+(""+t.year)>=+e.year[0]&&+(""+t.year)<=+e.year[1],l=!!(p>0&&(d(t.name)||d(t.mark))||0===p),a&&r&&n&&i&&o&&c&&l}));if(M.innerHTML="",0===t.length)M.innerHTML="<h2>Извините совпадений не найдено</h2>";else{var a=JSON.parse(JSON.stringify(t));switch(e.sorting){case"textUp":a.sort((function(e,t){return e.name>t.name?1:-1}));break;case"textDown":a.sort((function(e,t){return t.name>e.name?1:-1}));break;case"yearUp":a.sort((function(e,t){return+e.year-+t.year}));break;case"yearDown":a.sort((function(e,t){return+t.year-+e.year}))}T.draw(a)}},q=Array.from(document.querySelectorAll(".filter-btn")),j=document.querySelector(".filter-check"),X=document.querySelector("#input"),N=document.querySelector("#range-amount"),J=document.querySelector("#range-year"),U=document.querySelector(".filter-select"),G=function(e){q.forEach((function(t){t.classList.remove("filter-active"),(e.mark.length>0&&e.mark.includes(t.innerText)||e.color.length>0&&e.color.includes(t.innerText)||e.amountOfCamera.length>0&&e.amountOfCamera.includes(t.innerText))&&t.classList.add("filter-active")})),e.isPopular?j.checked=!0:j.checked=!1,X.value=e.name,Array.from(N.children).forEach((function(t){if(t.classList.contains("input-range")){var a=+t.max-+t.min,r=+t.min,n=(+e.amount[0]-r)/a*100,i=(+e.amount[1]-r)/a*100;t.style.background="linear-gradient(to right, white 0%, white "+n+"%, #003d7c "+n+"%, #003d7c "+i+"%, white "+i+"%, white 100%)"}t.classList.contains("min")&&(t.value=e.amount[0]),t.classList.contains("max")&&(t.value=e.amount[1]),t.classList.contains("range_min")&&(t.innerText=e.amount[0]),t.classList.contains("range_max")&&(t.innerText=e.amount[1])})),Array.from(J.children).forEach((function(t){if(t.classList.contains("input-range")){var a=+t.max-+t.min,r=+t.min,n=(+e.year[0]-r)/a*100,i=(+e.year[1]-r)/a*100;t.style.background="linear-gradient(to right, white 0%, white "+n+"%, #003d7c "+n+"%, #003d7c "+i+"%, white "+i+"%, white 100%)"}t.classList.contains("min")&&(t.value=e.year[0]),t.classList.contains("max")&&(t.value=e.year[1]),t.classList.contains("range_min")&&(t.innerText=e.year[0]),t.classList.contains("range_max")&&(t.innerText=e.year[1])})),Array.from(U.options).forEach((function(t){t.value===""+e.sorting&&(t.selected=!0)}))},H=document.querySelector(".filters"),F=document.querySelector("#input"),B=document.querySelector(".filter-select"),R=document.querySelector(".reset-filters"),D=document.querySelector(".reset-settings"),V={};function $(e){var t=e.target,a=t.classList,r=t.getAttribute("name"),n=t.parentElement,i=null==n?void 0:n.children[0],o=null==n?void 0:n.children[1],c=null==n?void 0:n.children[2],l=null==n?void 0:n.children[3],s=+i.value,m=+o.value,u=+t.max-+t.min,p=(s-+t.min)/u*100,d=(m-+t.min)/u*100;switch(a.contains("min")&&s>m-1&&(i.value=""+(m-1)),s=+i.value,a.contains("max")&&m-1<s&&(o.value=""+(s+1)),m=+o.value,r){case"range_1":c.innerText=""+s,V.amount[0]=""+s;break;case"range_2":l.innerText=""+m,V.amount[1]=""+m;break;case"range_3":c.innerText=""+s,V.year[0]=""+s;break;case"range_4":l.innerText=""+m,V.year[1]=""+m}Array.from(t.parentElement.children).forEach((function(e){e.classList.contains("input-range")&&(e.style.background="linear-gradient(to right, white 0%, white "+p+"%, #003d7c "+p+"%, #003d7c "+d+"%, white "+d+"%, white 100%)")})),localStorage.setItem("filters",JSON.stringify(V)),_(V)}null!==localStorage.getItem("filters")?(V=JSON.parse(localStorage.getItem("filters")),G(V),_(V)):V=JSON.parse(JSON.stringify(x)),H.addEventListener("click",(function(e){if(e.target.hasAttribute("data-filter")){var t=e.target.dataset.filter;if(e.target.classList.contains("filter-btn")){e.target.classList.toggle("filter-active");var a=V[""+t].indexOf(""+e.target.innerText);-1===a?V[""+t].push(e.target.innerText):V[""+t].splice(+(""+a),1)}e.target.classList.contains("filter-check")&&(V[""+t]=e.target.checked),"clear"===t&&(F.value="",F.focus(),V.name=""),localStorage.setItem("filters",JSON.stringify(V)),_(V)}})),F.addEventListener("input",(function(e){V.name=e.target.value,localStorage.setItem("filters",JSON.stringify(V)),_(V)})),B.addEventListener("change",(function(e){V.sorting=e.target.value,localStorage.setItem("filters",JSON.stringify(V)),_(V)})),R.addEventListener("click",(function(){var e=V.sorting;(V=JSON.parse(JSON.stringify(x))).sorting=e,localStorage.setItem("filters",JSON.stringify(x)),G(V),F.focus(),_(V)})),D.addEventListener("click",(function(){localStorage.clear(),location.reload()})),document.querySelectorAll('input[type="range"]')[0].addEventListener("input",$),document.querySelectorAll('input[type="range"]')[1].addEventListener("input",$),document.querySelectorAll('input[type="range"]')[2].addEventListener("input",$),document.querySelectorAll('input[type="range"]')[3].addEventListener("input",$);var Y=new E;if(Y.draw(O),Y.setProductStorage(),null!==localStorage.getItem("filters")){var Z=JSON.parse(localStorage.getItem("filters"));_(Z)}})();
//# sourceMappingURL=main.js.map